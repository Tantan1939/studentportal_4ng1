{% extends 'studentportal/base1.html' %}
{% block content %}
{% include 'studentportal/messages/messages.html' %}


<div class="landing">
    <div class="landing_o">
        <div class="newfangled_title">
            <div class="logo">logo</div>
            <h3 class="landing_title d-flex flex-column text-center mt-3">
                Leandro Integrated School

            </h3>
        </div>
    </div>
</div>


    <!-- Offered Courses -->
    <div class="container-fluid" style="background:#800000; border-top: 3px solid #fff;">
        <div class="track_and_strand_wrapper container py-5 position-relative">
            <div class="tracks_strand_date">
                <h3> School Year {% firstof sy %} </h3>
                {% if enroll_now == "postpone" %}
                    <p> Enrollment and Admission are currently postponed. </p>
        
                {% elif enroll_now == "enroll" %}
                    <p> Enrollment and Admission will end on {{end_date_enrollment.end_date|date:"l, M d, o"}}. </p>
                    <a href="{% url 'studentportal:admission_application' %}" class="btn btn-primary btn-sm"> {% firstof sy %} Apply Now </a> <!-- Button to apply for admission and enrollment -->
        
                {% elif enroll_now == "start_soon" %}
                    <p> Enrollment and Admission will start on {{start_date_enrollment.start_date|date:"l, M d, o"}}. </p>
        
                {% endif %}
            </div>


            <center> <h2 class="text-white"> Offered Courses </h2> </center>&nbsp;
            <div class="wrap pt-0">
                <div class="row py-3 justify-content-sm-center justify-content-md-start" style="padding-top:0;">
                    {% for course in courses %}
                    <div class="col-sm-12 col-md-4">
                        <div class="track_strand mb-3 p-2 px-3">
                            <h3 class="text-center"> {{course.track_name}} </h3>
                            <div class="strand_box border-top border-danger">
                                <!-- <h5 class="text-center"> Strands: </h5> -->
                                {% for strand in course.strands %}
                                    <div class="strand d-flex justify-content-center text-center">
                                        <!-- <i class="fa fa-caret-right" aria-hidden="true"></i> -->
                                        <p> {{strand.strand_name}} </p>
                                    </div>
                                {% empty %}
                                    <p class="text-center">No Strand</p>
                                {% endfor %}
                            </div>
                        </div>
    
                    </div>
                    {% empty %}
                        <div class="track_strand mb-3 " style="background: #fff;">
                            <h3 class=""> {{title}} have no courses offered yet. </h3>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>

    </div>
    
    <div class="email" id="eyeicon" style="display:none;"></div>
    <div class="icon" id="eyeicon2" style="display:none;"></div>
    <!-- Events -->
    {% if events %}
    <div class="container-fluid  event py-5 mt-5" >  
        <div class="container">
            <div class="">
                <center> 
                    <h2 class="text-dark mb-4"> Latest News and Events 
                    </h2>
                    <!-- <span class="linee"></span>  -->
                </center>&nbsp;
                <div class="row overfl">
                    {% for key, value in events.items %}
                        <div class="col-md-4 mb-5 " style="background: #fff;">
                            <div class="box round">
                                <div class="string_wrapper">
                                    <span class="string"></span>
                                    <span class="string"></span>
                                </div>
                                <h3 class="box_title text-center px-3 pb-2 pt-2 mb-0"> {{key}} </h3>
                         
                                <div class="strand_box p-3">
                                    {% for event in value %}
                                        <div class="mb-1">
                                                <p class="m-0"> {{event.name|truncatewords:10}} </p>
                                        </div>
                                    {% endfor %}
                                </div>

                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>

        </div>
    </div>
    {% endif %}


    <!-- Frequently Asked Questions (FAQs) -->
    {% if hasFAQs %}
        <section id="questions" class="p-5">
            <div class="container">
                <h2 class="text-center mb-4"> Frequently Asked Questions </h2>
                <div class="accordion accordion-flush" id="questions">

                    {% for questionAndAnswer in hasFAQs %}
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                            data-bs-target="#question{{forloop.counter}}">
                            {{questionAndAnswer.Question}}
                            </button>
                        </h2>
                        <div id="question{{forloop.counter}}" class="accordion-collapse collapse" data-bs-parent="#questions">
                            <div class="accordion-body p-4">
                            {{questionAndAnswer.Answer}}
                            </div>
                        </div>
                    </div>
                    {% endfor %}

                </div>
            </div>
        </section>
    {% endif %}




<!-- School location in google map and school contact details -->
<section class="p-5 bg-light" id="contact">
    <div class="container">
        <div class="row g-4 ">
            <div class="col-md box border-top border-2 border-danger py-4 me-3 bg-white">
                <h2 class="text-center mb-4"> Contact Us </h2>
                <ul class="list-group list-group-flush lead">
                    <li class="list-group-item">
                        <span class="fw-bold"> Address: </span> Macam St. Taal Bocaue Bulacan
                    </li>

                    <li class="list-group-item">
                        <span class="fw-bold"> Contact: </span> {{contacts.cellphone_number}}
                    </li>

                    <li class="list-group-item">
                        <span class="fw-bold"> Email: </span>  {{emails.email}}
                    </li>
                </ul>
            </div>

            <div class="col-md box p-0 border-top border-2 border-danger">
                <div id='map' ></div>
            </div>
        </div>
    </div>
</section>


<style>
    .box{
        box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;
    }
</style>


<script type="text/javascript">
    // map
    mapboxgl.accessToken = 'pk.eyJ1IjoiYnVoYXlwYWFrbzIwMjIiLCJhIjoiY2wwNTdkM3VvMXY4djNicGswdG44NTU2aiJ9.o86cyM3P2LrsZ9GZZf444Q';
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11',
        center: [120.92545821448982,14.810937916453184],
        zoom: 15
    });
</script>

{% endblock content %}